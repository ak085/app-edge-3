# BacPipes - Portable Edge Data Collection System
# Copy this file to .env for your deployment
#
# IMPORTANT: BACnet and MQTT settings are loaded from DATABASE, not .env!
# - Configure BACnet IP via Settings GUI (auto-detects if not set)
# - Configure MQTT broker via Settings GUI
# - Environment variables below are FALLBACKS ONLY

# ============================================================================
# Database Configuration (Required)
# ============================================================================
POSTGRES_USER=anatoli
POSTGRES_DB=bacpipes
# Note: Uses service name 'postgres' with bridge networking
# Bridge networking is used for LXC container compatibility
# External port 5434 maps to internal port 5432
DATABASE_URL=postgresql://anatoli@postgres:5432/bacpipes

# ============================================================================
# BACnet Configuration (OPTIONAL - Loaded from Database)
# ============================================================================
# These are fallback values only. Configure via Settings GUI instead.
# If not set anywhere, worker will auto-detect local IP address.
#
# BACNET_IP=192.168.1.32        # Auto-detected if not configured
# BACNET_PORT=47808              # Default: 47808 (BACnet/IP standard)
# BACNET_DEVICE_ID=3001234       # Unique device ID for this instance

# ============================================================================
# MQTT Broker Configuration (OPTIONAL - Loaded from Database)
# ============================================================================
# These are fallback values only. Configure via Settings GUI instead.
#
# MQTT_BROKER=10.0.60.3          # External MQTT broker IP
# MQTT_PORT=1883                 # Default: 1883 (MQTT standard)
MQTT_CLIENT_ID=bacpipes_worker # Unique client identifier

# ============================================================================
# TimescaleDB Time-Series Database (Optional - for historical data)
# ============================================================================
# Worker writes historical data directly to TimescaleDB
# If unavailable, data flows via MQTT → Telegraf → TimescaleDB
#
TIMESCALEDB_HOST=timescaledb       # Default: timescaledb (service name with bridge networking)
TIMESCALEDB_PORT=5432              # Internal port (external: 5435)
TIMESCALEDB_DB=timescaledb         # Database name
TIMESCALEDB_USER=anatoli           # Database user
TIMESCALEDB_PASSWORD=              # Database password (empty for trust auth)

# ============================================================================
# Worker Configuration
# ============================================================================
POLL_INTERVAL=60               # Default polling interval (seconds)

# ============================================================================
# System Configuration
# ============================================================================
TZ=Asia/Kuala_Lumpur           # Timezone for timestamps
NODE_ENV=production            # Environment: development | production
